<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Clientes</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="icon" href="{{ url_for('static', filename='images/favicon.ico') }}" type="image/x-icon">
</head>

<body>
<div class="layout">

    <!-- SIDEBAR -->
    <aside class="sidebar">
        <div class="logo">
            <a href="{{ url_for('index') }}" class="logo-link">
                <img src="{{ url_for('static', filename='images/logoinvert.png') }}"
                     alt="Logo Lunita Val"
                     class="logo">
            </a>
        </div>

        <nav class="menu">
            <a href="{{ url_for('index') }}" class="menu_btn">Vender</a>
            <a href="{{ url_for('sales.shipments_view') }}" class="menu_btn">Gestión de Cadeteria</a>
            <a href="{{ url_for('explore_sales') }}" class="menu_btn">Explorar ventas</a>
            <a href="{{ url_for('customers.manage_customers_view') }}" class="menu_btn">Clientes</a>
            <a href="{{ url_for('proximamente_view') }}" class="menu_btn">Retiro</a>
            <a href="{{ url_for('proximamente_view') }}"" class="menu_btn">Correo</a>
            <a href="{{ url_for('proximamente_view') }}" class="menu_btn">Venta en Vivo</a>
        </nav>
    </aside>

    <!-- CONTENIDO PRINCIPAL -->
    <div class="main-content">

        <!-- HEADER -->
        <header class="header">
            <h1 class="view-title">Clientes</h1>
        </header>

        <!-- MAIN -->
        <main class="content">
            <div class="content-column">

                <!-- BUSCADOR -->
                <section class="form-panel">
                    <div class="form-group" >
                        <label>Buscar cliente</label>
                        <input type="text" id="customerSearch" placeholder="Nombre o apellido" class="input-text">
                    </div>
                    <div class="section-header">
                        
                        <button type="button" id="btnNewCustomer" class="btn">Nuevo cliente</button>
                    </div>
                </section>
                <!-- FORM CLIENTE -->
                <section class="form-panel hidden" id="customerFormDiv">
                    <h3 id="customerFormTitle">Crear cliente</h3><br>

                    <form id="customerForm">
                        <!-- todo el contenido igual que ahora -->

                        <input type="hidden" id="customerFormId">

                        <div class="form-group">
                            <label>Nombre</label>
                            <input type="text" class="input-text" id="cf_first_name" required>
                        </div>

                        <div class="form-group">
                            <label>Apellido</label>
                            <input type="text" class="input-text" id="cf_last_name" required>
                        </div>

                        <div class="form-group">
                            <label>Dirección</label>
                            <input type="text" class="input-text" id="cf_address" required>
                        </div>

                        <div class="form-group">
                            <label>Localidad</label>
                            <input type="text" class="input-text" id="cf_city" required>
                        </div>

                        <div class="form-group">
                            <label>Teléfono</label>
                            <input type="text" class="input-text" id="cf_phone" required>
                        </div>

                        <div class="form-group">
                            <label>Descripción</label>
                            <textarea id="cf_description" class="input-text"></textarea>
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="button-edit">Guardar</button>
                            <button type="button" class="button-delete" id="customerFormCancel">Cancelar</button>
                        </div>
                    </form>
                </section>
                <!-- TABLA -->
                <div class="table-wrapper">
                    <table id="customersTable">
                        <thead>
                            <tr>
                                <th>Nombre</th>
                                <th>Apellido</th>
                                <th>Dirección</th>
                                <th>Ciudad</th>
                                <th>Teléfono</th>
                                <th>Descripción</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Clientes se cargan aquí -->
                        </tbody>
                    </table>
                </div>

                <!-- PAGINACIÓN -->
                <div class="pagination">
                    <button id="prevPage">Anterior</button>
                    <span id="pageInfo"></span>
                    <button id="nextPage">Siguiente</button>
                </div>

            </div>
        </main>

    </div>
</div>

<!-- MODAL (NO TOCAR IDs) -->
<div id="customerModal" class="modal">
    <div class="modal-content">
        <h2 id="modalTitle">Editar Cliente</h2>

        <form id="editCustomerForm">
            <input type="hidden" id="customerId">

            <div class="form-group">
                <label>Nombre</label>
                <input type="text" id="cf_first_name" class="input-text" required>
            </div>

            <div class="form-group">
                <label>Apellido</label>
                <input type="text" id="cf_last_name" class="input-text" required>
            </div>

            <div class="form-group">
                <label>Dirección</label>
                <input type="text" id="cf_address" class="input-text" required>
            </div>

            <div class="form-group">
                <label>Ciudad</label>
                <input type="text" id="cf_city"  class="input-text" required>
            </div>

            <div class="form-group">
                <label>Teléfono</label>
                <input type="text" id="cf_phone" class="input-text" required>
            </div>

            <div class="form-group">
                <label>Descripción</label>
                <textarea id="cf_description" class="input-text"></textarea>
            </div>

            <div class="form-actions">
                <button type="submit" class="button-edit">Guardar</button>
                <button type="button" id="modalCancel" class="button-delete">Cancelar</button>
            </div>
        </form>
    </div>
</div>

<script src="{{ url_for('static', filename='js/clients_mgt') }}"></script>
</body>
</html>
